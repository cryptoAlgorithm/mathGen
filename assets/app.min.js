const $=e=>document.getElementById(e);function copyElemContents(e){e.classList.add("copy");let t,s,o=document.body;if(document.createRange&&window.getSelection){t=document.createRange(),(s=window.getSelection()).removeAllRanges();try{t.selectNodeContents(e),s.addRange(t)}catch(o){t.selectNode(e),s.addRange(t)}document.execCommand("copy")}else o.createTextRange&&((t=o.createTextRange()).moveToElementText(e),t.select(),t.execCommand("Copy"));e.classList.remove("copy")}const checkboxClickListener=e=>{console.log("event"),$("grp-mdc").MDCCheckbox.disabled=!0,$("per-sq-mdc").MDCCheckbox.disabled=!0,$("tri-mdc").MDCCheckbox.disabled=!0,$("general-form-mdc").MDCCheckbox.disabled=!0,e.target.checked&&(e.target.disabled=!1)},showMSG=e=>{const t=$("msg-snackbar").MDCSnackbar;t.labelText=e,t.open()},resetFactOps=()=>{$("c-factor").checked=!1,$("grp").checked=!1,$("per-sq").checked=!1,$("tri").checked=!1,$("general-form").checked=!1};$("reset-methods").onclick=resetFactOps;const VERSION_CODE="0.1.5";$("more-info").onclick=(()=>{const e=$("more-info-dialog").MDCDialog;e.open(),e.listen("MDCDialog:closed",e=>{switch(e.detail.action){case"credits":$("credits-dialog").MDCDialog.open();break;case"settings":$("settings-dialog").MDCDialog.open()}})}),$("app-ver").textContent="App version: v0.1.5";const constructQnTable=(e,t,s,o=!1)=>{let n="";o&&(n+='<div class="printMsg">Reloading this window will cause generated questions to be lost</div>'),null!=s.header&&(n+=`<h2><b>${s.header}</b></h2>`),s.name&&(n+='<p style="margin:0">Name: <span style="letter-spacing:0px">＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿</span></p>'),s.class&&(n+='<p style="display:inline-block;margin-top:2px">Class: <span style="letter-spacing:0px">＿＿＿＿＿＿＿＿＿＿</span></p>'),s.date&&(n+='<p style="float:right;margin-top:2px">Date: <span style="letter-spacing:0px">＿＿＿＿＿＿＿＿＿＿</span></p>'),n+="<table>";let a=1;t.forEach(e=>{(a-1)%s.rows==0&&0!==a&&(n+="</tr><tr>"),n+=`<td>${a}. </td><td class="qn">${e}</td>`,a++}),n+="</tr><td></td>",e.classList.add("qnOutput"),e.innerHTML=n};$("start_gen").onclick=(()=>{const e=$("ans-min").MDCTextField,t=$("ans-max").MDCTextField,s=e.value,o=t.value;if(Math.abs(o-s)<2||!t.valid||!e.valid)return void showMSG("Invalid minimum or maximum range");MIN_RANGE=s,MAX_RANGE=o;const n=$("num-gen").MDCTextField;if(!n.valid)return void showMSG("Invalid number of questions to generate");const a=n.value,c=new Date;let l=[];if($("grp").checked)for(let e=0;e<a;e++){const{a:e,b:t,x:s,y:o,use_vars:n}=_grouping();l.push(grouping(e,t,s,o,n).qn)}else if($("per-sq").checked)for(let e=0;e<a;e++){const{a:e,b:t,c:s,use_vars:o,two_var:n}=_perfect_square();l.push(perfect_square(e,t,s,o,n).qn)}else if($("tri").checked)for(let e=0;e<a;e++){const{a:e,b:t,c:s,use_vars:o,x1:n,x2:a}=_trinomial();l.push(trinomial(e,t,s,o,n,a).qn)}else if($("c-factor").checked)for(let e=0;e<a;e++)l.push(common_factor().qn);else{if(!$("general-form").checked)return void showMSG("No factorisation method(s) selected");for(let e=0;e<a;e++){const{a:e,b:t,c:s,use_vars:o,x1:n,x2:a}=_general_formula();l.push(general_formula(e,t,s,o,n,a).qn)}}const i={rows:2,name:!0,date:!0,class:!0,header:"This is a test"};constructQnTable($("results-content"),l,i);const r=$("results-dialog").MDCDialog;r.open(),r.listen("MDCDialog:closed",e=>{switch(e.detail.action){case"print":const t=window.open("printResults.html","Print Questions","toolbars=0,width=720,height=640,left=200,top=200,scrollbars=1,resizable=1,modal=1,alwaysRaised=1");t.onload=(()=>{constructQnTable(t.document.body,l,i,!0),window.onafterprint=(()=>{setTimeout(()=>t.close(),500)}),t.print()})}}),console.log("Time:",new Date-c)}),$("copy-questions").onclick=(()=>{copyElemContents($("results-content")),showMSG("Questions copied to clipboard"),$("results-dialog").MDCDialog.close()});