function isInt(n){let r;return!isNaN(n)&&(0|(r=parseFloat(n)))===r}function sample(n,r){let o=new Array(r),t=n.length,a=new Array(t);if(r>t)throw new RangeError("getRandom: more elements taken than available");for(;r--;){const e=Math.floor(Math.random()*t);o[r]=n[e in a?a[e]:e],a[e]=--t in a?a[t]:t}return o}function randrange(n,r){return n=Math.ceil(n),r=Math.floor(r),Math.floor(Math.random()*(r-n))+n}const randint=(n,r)=>randrange(n,r+1);function gcd(n,r){if("number"!=typeof n||"number"!=typeof r)return!1;for(n=Math.abs(n),r=Math.abs(r);r;){const o=r;r=n%r,n=o}return n}function format_coeff1(n){return n=-1===n?"-":1===n?"":n.toString()}function format_coeff2(n){let r="";return r=-1===n?" - ":1===n?" + ":0===n?"":n<-1?" - "+Math.abs(n).toString():" + "+n.toString()}function format_coeff3(n){return n=0===n?"":n<0?" - "+Math.abs(n).toString():" + "+n.toString()}let MIN_RANGE=-10,MAX_RANGE=10;const COMMON_MIN_RANGE=2,COMMON_MAX_RANGE=6,LENGTH_MIN_RANGE=4,LENGTH_MAX_RANGE=6,vars=["a","b","c","d","m","n","p","q","s","t","x","y"];function _general_formula(){let n=0,r=0,o=0,t=0,a=0;for(;r**2-4*n*o<0||0===r||0===o||1!==gcd(n,gcd(r,o))||!isInt(t)||!isInt(a);)n=randint(MIN_RANGE,MAX_RANGE),r=randint(MIN_RANGE,MAX_RANGE),o=randint(MIN_RANGE,MAX_RANGE),t=(-r+Math.sqrt(r**2-4*n*o))/(2*n),a=(-r-Math.sqrt(r**2-4*n*o))/(2*n);for(;!isInt(t)||!isInt(a)||r**2-4*n*o<0||0===r||0===o||1!==gcd(n,gcd(r,o));)n=randint(MIN_RANGE,MAX_RANGE),r=randint(MIN_RANGE,MAX_RANGE),o=randint(MIN_RANGE,MAX_RANGE),t=(-r+Math.sqrt(r**2-4*n*o))/(2*n),a=(-r-Math.sqrt(r**2-4*n*o))/(2*n);return{a:n,b:r,c:o,use_vars:vars[randrange(0,vars.length)],x1:t,x2:a}}function general_formula(n,r,o,t,a,e){return n=format_coeff1(n),r=format_coeff2(r),o=format_coeff3(o),{qn:`${n}${t[0]}²${r}${t[0]}${o} = 0`,x1:a,x2:e}}function common_factor(){const n=randint(LENGTH_MIN_RANGE,LENGTH_MAX_RANGE),r=randint(COMMON_MIN_RANGE,COMMON_MAX_RANGE),o=sample(vars,n);let t="";for(let a=0;a<n;a++){let n=randint(MIN_RANGE,MAX_RANGE);for(;0===n;)n=randint(MIN_RANGE,MAX_RANGE);t+=0===a?format_coeff1(n*r)+o[a]:format_coeff2(n*r)+o[a]}return{qn:t}}function _trinomial(){let n=0,r=0,o=0,t=0,a=0,e=0,_=0;for(;1!=gcd(n,gcd(r,o))||0==r;){for(e=randint(MIN_RANGE,MAX_RANGE),_=randint(MIN_RANGE,MAX_RANGE),t=randint(MIN_RANGE,MAX_RANGE),a=randint(MIN_RANGE,MAX_RANGE);0===e;)e=randint(MIN_RANGE,MAX_RANGE);for(;0===_;)_=randint(MIN_RANGE,MAX_RANGE);for(;0===t;)t=randint(MIN_RANGE,MAX_RANGE);for(;0===a;)a=randint(MIN_RANGE,MAX_RANGE);n=t*a,r=e*a+_*t,o=e*_}return{a:n,b:r,c:o,use_vars:sample(vars,1),x1:t,x2:a}}function trinomial(n,r,o,t,a,e){return n=format_coeff1(n),r=format_coeff2(r),o=format_coeff2(o),{qn:`${n}${t[0]}²${r}${t[0]}${o} = 0`,x1:a,x2:e}}function _grouping(){let n=0,r=0,o=0,t=0;for(;1!==gcd(n*o,gcd(n*t,gcd(r*o,r*t)));){for(n=randint(MIN_RANGE,MAX_RANGE),r=randint(MIN_RANGE,MAX_RANGE),o=randint(MIN_RANGE,MAX_RANGE),t=randint(MIN_RANGE,MAX_RANGE);0===n;)n=randint(MIN_RANGE,MAX_RANGE);for(;0===r;)r=randint(MIN_RANGE,MAX_RANGE);for(;0===o;)o=randint(MIN_RANGE,MAX_RANGE);for(;0===t;)t=randint(MIN_RANGE,MAX_RANGE)}return{a:n,b:r,x:o,y:t,use_vars:sample(vars,4)}}function grouping(n,r,o,t,a){const e=n,_=r,f=o,N=t;return n=format_coeff1(n),r=format_coeff2(r),o=format_coeff1(o),t=format_coeff2(t),{qn:`${format_coeff1(e*f)}${a[0]}${a[1]}${format_coeff2(e*N)}${a[0]}${a[3]}${format_coeff2(_*f)}${a[2]}${a[1]}${format_coeff2(_*N)}${a[2]}${a[3]}`,ans:`(${n}${a[0]}${r}${a[2]})(${o}${a[1]}${t}${a[3]})`}}function common_grouping(){const{a:n,b:r,x:o,y:t,use_vars:a}=_grouping(),e=randint(COMMON_MIN_RANGE,COMMON_MAX_RANGE);return grouping(n*e,r*e,o*e,t*e,a)}function common_general_formula(){const{a:n,b:r,c:o,use_vars:t,x1:a,x2:e}=_general_formula(),_=randint(COMMON_MIN_RANGE,COMMON_MAX_RANGE);return general_formula(n*_,r*_,o*_,t,a,e)}function common_trinomial(){const{a:n,b:r,c:o,use_vars:t,x1:a,x2:e}=_trinomial(),_=randint(COMMON_MIN_RANGE,COMMON_MAX_RANGE);return trinomial(n*_,r*_,o*_,t,a,e)}function _perfect_square(){let n=0,r=0,o=0;for(;0===n||0===r||0===o||1!==gcd(n,gcd(r,o));){const t=randint(MIN_RANGE,MAX_RANGE),a=randint(MIN_RANGE,MAX_RANGE);n=t**2,r=2*t*a,o=a**2}let t,a=!1;return 1===randrange(0,2)?(t=sample(vars,2),a=!0):(t=sample(vars,1)).push(randrange(0,10).toString()),{a:n,b:r,c:o,use_vars:t,two_var:a}}function perfect_square(n,r,o,t,a){n=format_coeff1(n),r=format_coeff2(r);let e="";return a?(o=format_coeff2(o),e=`${n}${t[0]}²${r}${t[0]}${t[1]}${o}${t[1]}² = 0`):(o=format_coeff3(o),e=`${n}${t[0]}²${r}${t[0]}${o} = 0`),{qn:e}}function lib_test(){console.log("General Formula");for(let n=0;n<10;n++){const{a:n,b:r,c:o,use_vars:t,x1:a,x2:e}=_general_formula();console.log(general_formula(n,r,o,t,a,e))}console.log("Common Factor");for(let n=0;n<10;n++)console.log(common_factor());console.log("Trinomial");for(let n=0;n<10;n++){const{a:n,b:r,c:o,use_vars:t,x1:a,x2:e}=_trinomial();console.log(trinomial(n,r,o,t,a,e))}console.log("Grouping");for(let n=0;n<10;n++){const{a:n,b:r,x:o,y:t,use_vars:a}=_grouping();console.log(grouping(n,r,o,t,a))}console.log("Common factor + trinomial");for(let n=0;n<10;n++)console.log(common_trinomial());console.log("Perfect square");for(let n=0;n<10;n++){const{a:n,b:r,c:o,use_vars:t,two_var:a}=_perfect_square();console.log(perfect_square(n,r,o,t,a))}const n=new Date;let r=[];for(let n=0;n<1e3;n++){const{a:n,b:o,x:t,y:a,use_vars:e}=_grouping();r.push(grouping(n,o,t,a,e).qn)}console.log("Time:",new Date-n)}lib_test();